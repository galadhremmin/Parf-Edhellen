@import '../../../../_scss/_variables';

$gloss-border-color: var(--ed-border);

// On wide screens, expand the glossary beyond the Bootstrap container
// to make better use of the available viewport width.
//
// Instead of fixed rem values (which overshoot at certain widths), we
// compute the actual whitespace between the container and the main-area
// edge, then expand into it.
//
//   main width  = 100vw - sidebar
//   container   = 100%  (parent content width)
//   whitespace  = (main width - container) / 2
//
// A 2rem gutter prevents touching the edge (and absorbs the scrollbar
// difference between 100vw and the actual viewport).
.ed-glossary-container {
  @media (min-width: $screen-xxl-width) {
    // how much whitespace sits on each side of the container
    --_avail: calc((100vw - #{$size-desktop-user-menu-width} - 100%) / 2 - 2rem);
    margin-left:  calc(-1 * max(0px, var(--_avail)));
    margin-right: calc(-1 * max(0px, var(--_avail)));
  }
  @media (min-width: $screen-xxxl-width) {
    // At very wide viewports, reserve space on the right for the
    // always-visible minimap (~14rem + gap).
    margin-right: calc(-1 * min(2rem, max(0px, var(--_avail))));
  }
}

.ed-glossary {
  &.ed-glossary--unusual {
    margin-top: 2rem;
    padding-top: 2rem;
  }

  .ed-glossary__language {
    margin-top: 4em;

    &:first-child {
      margin-top: 0 !important;
    }
  }

  // CSS columns with column-width: entries pack vertically (each takes
  // only its natural height) and the browser decides how many columns
  // fit based on the available width.
  .ed-glossary__language__words {
    padding-top: 1rem;
    column-width: 22rem;
    column-gap: 1rem;

    // When a language has only one entry, let it use the full width
    // instead of being squeezed into a single narrow column.
    &:has(> :only-child) {
      columns: auto;
    }
  }

  @media (max-width: map-get($grid-breakpoints, 'sm')) {
    .ed-glossary__language__words {
      columns: auto;
    }
  }

  &.ed-glossary--single {
    .ed-glossary__language__words {
      columns: auto;
    }
  }
}

.ed-glossary-loaded-notifier {
  z-index: 1000;
}
